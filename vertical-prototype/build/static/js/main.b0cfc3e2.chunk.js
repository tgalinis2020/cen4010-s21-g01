(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(17),s=n.n(r),c=n(6),u=n(20),o=n(10),l=n(18),h=n(19),d=n(8),j=n(13),b=n(11),p=n(12),f=n(22),O=n(21);function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="https://lamp.cse.fau.edu/~cen4010_s21_g01/api-v1.php".concat(e),a={method:t,headers:{"Content-Type":"application/json",Accept:"application/json"}};return["POST","PUT","PATCH"].includes(t)&&(a.body=JSON.stringify({data:n})),fetch(i,a)}function m(t){var e=t.split(" "),n=Object(c.a)(e,2),i=n[0],a=n[1],r=i.split("-"),s=Object(c.a)(r,3),u=s[0],o=s[1],l=s[2],h=a.split(":"),d=Object(c.a)(h,3),j=d[0],b=d[1],p=d[2];return Date.UTC(l,o,u,j,b,p)}var g=function(t){Object(f.a)(n,t);var e=Object(O.a)(n);function n(){return Object(b.a)(this,n),e.call(this,"users")}return Object(p.a)(n,[{key:"create",value:function(t){var e=this;return y("POST","/".concat(this.type),{type:this.type,attributes:this.attributes}).then((function(n){return e.hydrate(n.data),y("PUT","/passwords/".concat(n.data.id),t)}))}},{key:"updatePassword",value:function(t,e){return y("PATCH","/passwords/".concat(this.id),{current:t,password:e})}},{key:"login",value:function(t){return y("POST","/session",{username:this.getAttribute("username"),password:t})}},{key:"logout",value:function(){return y("DELETE","/session")}},{key:"subscribeTo",value:function(t){return this.updateToManyRelationship("POST","subscriptions",[t])}},{key:"unsubscribeFrom",value:function(t){return this.updateToManyRelationship("DELETE","subscriptions",[t])}},{key:"addFavorite",value:function(t){return this.updateToManyRelationship("POST","favorites",[t])}},{key:"removeFavorite",value:function(t){return this.updateToManyRelationship("DELETE","favorites",[t])}},{key:"like",value:function(t){return this.updateToManyRelationship("POST","liked-posts",[t])}},{key:"unlike",value:function(t){return this.updateToManyRelationship("DELETE","liked-posts",[t])}}]),n}(function(){function t(e){Object(b.a)(this,t),this.id=null,this.type=e,this.attributes={},this.relationships={}}return Object(p.a)(t,[{key:"hydrate",value:function(t){this.id=t.id,this.attributes=t.attributes,"createdAt"in this.attributes&&(this.createdAt=m(this.attributes.createdAt)),this.relationships=t.relationships}},{key:"setAttribute",value:function(t,e){this.attributes[t]=e}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"toResourceIdentifier",value:function(){return{type:this.type,id:this.id}}},{key:"toResource",value:function(){return{type:this.type,id:this.id,attributes:this.attributes}}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={type:this.type,attributes:this.attributes};return null!==t&&(e.relationships=t),y("POST","/".concat(this.type),e).then((function(t){return t.data}))}},{key:"update",value:function(){return y("PATCH","/".concat(this.type),{type:this.type,id:this.id,attributes:this.attributes})}},{key:"delete",value:function(){return y("DELETE","/".concat(this.type,"/").concat(this.id))}},{key:"updateRelationship",value:function(t,e,n){return y(t,"/".concat(this.type,"/").concat(this.id,"/relationships/").concat(e),n)}},{key:"updateToManyRelationship",value:function(t,e,n){return this.updateRelationship(t,e,n.map((function(t){return t.toResourceIdentifier()})))}},{key:"updateToOneRelationship",value:function(t,e,n){return this.updateRelationship(t,e,n.toResourceIdentifier())}}]),t}());var v=n(2);function x(t){return{type:"users",id:t.id,attributes:{username:t.username,firstName:t.firstName,lastName:t.lastName,email:t.email,createdAt:m(t.createdAt)}}}function T(t){var e=t.onLoginSuccess,n=t.onLoginError,a=t.onLogoutSuccess,r=Object(i.useState)(""),s=Object(c.a)(r,2),u=s[0],h=s[1],j=Object(i.useState)(""),b=Object(c.a)(j,2),p=b[0],f=b[1];return Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(d.a.Group,{children:[Object(v.jsx)(d.a.Label,{children:"Username"}),Object(v.jsx)(d.a.Control,{type:"text",placeholder:"Enter username",onChange:function(t){return h(t.target.value)}})]}),Object(v.jsxs)(d.a.Group,{children:[Object(v.jsx)(d.a.Label,{children:"Password"}),Object(v.jsx)(d.a.Control,{type:"password",placeholder:"Enter password",onChange:function(t){return f(t.target.value)}})]}),Object(v.jsxs)(l.a,{children:[Object(v.jsx)(o.a,{variant:"primary",onClick:function(){return y("POST","/session",{username:u,password:p}).then((function(t){if(201!==t.status)throw t.status;return t.json()})).then((function(t){return t.data})).then(x).then(e).catch(n)},children:"Login"}),Object(v.jsx)(o.a,{variant:"primary",onClick:function(){y("DELETE","/session").then(a)},children:"Logout"})]})]})}function k(t){var e=t.image;return Object(v.jsxs)(j.a,{children:[Object(v.jsx)(j.a.Image,{src:e,width:400}),Object(v.jsx)(j.a.Caption,{children:"Uploaded Image"})]})}function E(){var t=Object(i.useState)(null),e=Object(c.a)(t,2),n=e[0],a=e[1],r=Object(i.useState)([]),s=Object(c.a)(r,2),l=s[0],j=s[1],b=Object(i.useState)(null),p=Object(c.a)(b,2),f=p[0],O=p[1],m=Object(i.useState)(null),E=Object(c.a)(m,2),S=E[0],w=E[1],A=function(){return y("GET","/users").then((function(t){return t.json()})).then((function(t){return t.data})).then((function(t){return t.map((function(t){var e=new g;return e.hydrate(t),e}))})).then(j)};return Object(i.useEffect)((function(){A(),y("GET","/session").then((function(t){return t.json()})).then((function(t){return t.data})).then(x).then(w).catch((function(t){return console.log("Not logged in")}))}),[w]),Object(v.jsxs)(h.a,{children:[Object(v.jsx)("h1",{children:"Users and Authentication"}),Object(v.jsx)(o.a,{className:"mb-4",onClick:A,children:"Refresh"}),Object(v.jsxs)(u.a,{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"ID"}),Object(v.jsx)("th",{children:"Username"}),Object(v.jsx)("th",{children:"E-mail Address"}),Object(v.jsx)("th",{children:"First Name"}),Object(v.jsx)("th",{children:"Last Name"}),Object(v.jsx)("th",{children:"Joined On"})]})}),Object(v.jsx)("tbody",{children:l.map((function(t,e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.id}),Object(v.jsx)("td",{children:t.getAttribute("username")}),Object(v.jsx)("td",{children:t.getAttribute("email")}),Object(v.jsx)("td",{children:t.getAttribute("firstName")}),Object(v.jsx)("td",{children:t.getAttribute("lastName")}),Object(v.jsx)("td",{children:t.getAttribute("createdAt")})]},e)}))})]}),Object(v.jsxs)("p",{children:["Logged in as: ",S?"".concat(S.attributes.firstName," ").concat(S.attributes.lastName):"(unauthenticated)"]}),Object(v.jsx)(T,{onLoginSuccess:w,onLoginError:function(t){return window.alert("Can't log in! (error code ".concat(t,")"))},onLogoutSuccess:function(){return w(null)}}),Object(v.jsx)("hr",{}),Object(v.jsx)("h1",{children:"File Upload"}),Object(v.jsx)("p",{children:"Note: you must be authenticated to upload images!"}),f&&Object(v.jsx)(k,{image:f}),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(d.a.File,{label:"Upload an image",onChange:function(t){return a(t.target)}}),Object(v.jsx)(o.a,{className:"my-4",variant:"primary",onClick:function(){return function(t){return fetch("https://lamp.cse.fau.edu/~cen4010_s21_g01/uploads",{method:"POST",body:t})}(n).then((function(t){return t.json()})).then((function(t){return t.data})).then((function(t){O(t),window.alert("File uploaded! Path: ".concat(t))})).catch((function(t){return window.alert("Unable to upload the image. ".concat(null===S?"You are not signed in!":"Go bug Tom about this."))}))},children:"Upload Image"})]})]})}n(31);console.log(E),s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(E,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.b0cfc3e2.chunk.js.map