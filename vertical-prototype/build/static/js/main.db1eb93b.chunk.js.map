{"version":3,"sources":["api/api_request.js","api/convert_datetime.js","Models/User.js","Models/Base.js","App.js","api/upload_image.js","reportWebVitals.js","index.js"],"names":["api_request","method","target","payload","fetch","headers","body","JSON","stringify","data","then","r","json","convert_datetime","datetime","split","datePart","timePart","date","month","year","hours","minutes","seconds","Date","UTC","User","password","this","type","attributes","obj","hydrate","id","current","username","getAttribute","pet","updateToManyRelationship","post","relationships","createdAt","attr","val","res","relationship","objs","updateRelationship","map","toResourceIdentifier","App","useState","file","setFile","users","setUsers","imageUrl","setImageUrl","session","setSession","setUsername","setPassword","onSubmitFile","upload_image","path","window","alert","catch","err","ImageFigure","image","Figure","FigureImage","src","width","FigureCaption","Container","Button","onClick","user","u","Table","index","firstName","lastName","Form","Group","Label","Control","placeholder","onChange","event","value","variant","email","File","label","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","console","log"],"mappings":"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","file":"static/js/main.db1eb93b.chunk.js","sourcesContent":["export default function api_request(method, target, payload = null) {\n    return fetch(`https://lamp.cse.fau.edu/~cen4010_s21_g01${target}`, {\n        method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept':       'application/json',\n        },\n        body: JSON.stringify({ data: payload }),\n    }).then(r => r.json())\n}\n","/**\n * In MySQL, the DATETIME data type returns dates using the \"YYYY-MM-DD HH:II:SS\"\n * format.\n * \n * Also worth noting that dates are stored relative to UTC.\n * \n * @param {string} datetimeString\n * @returns {Date} A Date object initialized using provided string.\n */\n export default function convert_datetime(datetime) {\n    const [datePart, timePart] = datetime.split(' ')\n    const [date, month, year] = datePart.split('-')\n    const [hours, minutes, seconds] = timePart.split(':')\n\n    return Date.UTC(year, month, date, hours, minutes, seconds)\n}\n","import Base from './Base'\nimport api_request from '../api/api_request'\n\nexport default class User extends Base\n{\n    constructor() {\n        super('users')\n    }\n\n    /**\n     * Creating users is a two-step process: a resource must be created and\n     * their password must be set immediately afterward.\n     * \n     * @param {string}   password\n     */\n    create(password) {\n        return api_request('POST', `/${this.type}`, {\n            type:       this.type,\n            attributes: this.attributes,\n        }).then(obj => {\n            this.hydrate(obj.data)\n            return api_request('PUT', `/passwords/${obj.data.id}`, password)\n        })\n    }\n\n    updatePassword(current, password) {\n        return api_request('PATCH', `/passwords/${this.id}`, { current, password })\n    }\n\n    login(password) {\n        return api_request('POST', '/session', {\n            username: this.getAttribute('username'),\n            password\n        })\n    }\n\n    logout() {\n        return api_request('DELETE', '/session')\n    }\n\n    subscribeTo(pet) {\n        return this.updateToManyRelationship('POST', 'subscriptions', [pet])\n    }\n\n    unsubscribeFrom(pet) {\n        return this.updateToManyRelationship('DELETE', 'subscriptions', [pet])\n    }\n\n    addFavorite(post) {\n        return this.updateToManyRelationship('POST', 'favorites', [post])\n    }\n\n    removeFavorite(post) {\n        return this.updateToManyRelationship('DELETE', 'favorites', [post])\n    }\n\n    like(post) {\n        return this.updateToManyRelationship('POST', 'liked-posts', [post])\n    }\n\n    unlike(post) {\n        return this.updateToManyRelationship('DELETE', 'liked-posts', [post])\n    }\n}","import api_request from '../api/api_request'\nimport convert_datetime from '../api/convert_datetime'\n\nexport default class Base\n{\n    constructor(type) {\n        this.id = null\n        this.type = type\n        this.attributes = {}\n        this.relationships = {}\n    }\n\n    hydrate(obj) {\n        this.id = obj.id\n        this.attributes = obj.attributes\n\n        if ('createdAt' in this.attributes) {\n            this.createdAt = convert_datetime(this.attributes.createdAt)\n        }\n\n        this.relationships = obj.relationships\n    }\n\n    setAttribute(attr, val) {\n        this.attributes[attr] = val\n    }\n\n    getAttribute(attr) {\n        return this.attributes[attr]\n    }\n\n    toResourceIdentifier() {\n        return {\n            type: this.type,\n            id:   this.id,\n        }\n    }\n\n    toResource() {\n        return {\n            type:       this.type,\n            id:         this.id,\n            attributes: this.attributes,\n        }\n    }\n\n    create(relationships = null) {\n        const payload = {\n            type:       this.type,\n            attributes: this.attributes\n        }\n\n        if (relationships !== null) {\n            payload['relationships'] = relationships\n        }\n\n        return api_request('POST', `/${this.type}`, payload)\n            .then(res => res.data)\n    }\n\n    update() {\n        return api_request('PATCH', `/${this.type}`, {\n            type:       this.type,\n            id:         this.id,\n            attributes: this.attributes,\n        })\n    }\n\n    delete() {\n        return api_request('DELETE', `/${this.type}/${this.id}`);\n    }\n\n    updateRelationship(method, relationship, payload) {\n        return api_request(\n            method,\n            `/${this.type}/${this.id}/relationships/${relationship}`,\n            payload\n        )\n    }\n\n    updateToManyRelationship(method, relationship, objs) {\n        return this.updateRelationship(\n            method,\n            relationship,\n            objs.map(obj => obj.toResourceIdentifier())\n        )\n    }\n\n    updateToOneRelationship(method, relationship, obj) {\n        return this.updateRelationship(\n            method,\n            relationship,\n            obj.toResourceIdentifier()\n        )\n    }\n}","import { useState } from 'react'\n\nimport Table from 'react-bootstrap/Table'\nimport Button from 'react-bootstrap/Button'\nimport Container from 'react-bootstrap/Container'\nimport Form from 'react-bootstrap/Form'\nimport Figure from 'react-bootstrap/Figure'\nimport FigureImage from 'react-bootstrap/FigureImage'\nimport FigureCaption from 'react-bootstrap/esm/FigureCaption'\n\nimport User from './Models/User'\n\nimport upload_image from './api/upload_image'\nimport api_request from './api/api_request'\nimport convert_datetime from './api/convert_datetime'\n\n// Normally an app would be made up of many smaller, self-contained components.\n// For the sake of demonstrating that things work, it's okay to have a mess for\n// now :)\nexport default function App() {\n    const [file, setFile] = useState(null)\n    const [users, setUsers] = useState([])\n    const [imageUrl, setImageUrl] = useState(null)\n    const [session, setSession] = useState(null)\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const onFileChanged = event => setFile(event.target)\n\n    const onSubmitFile = upload_image(file)\n        .then(path => {\n            setImageUrl(path)\n            window.alert(`File uploaded! Path: ${path}`)\n        })\n        .catch(err => window.alert(`Unable to upload the image. ${session === null ? 'You are not signed in!' : 'Go bug Tom about this.'}`))\n\n    const onGetUsers = () => api_request('GET', '/users')\n        .then(res => res.data)\n        .then(users => users.map(user => {\n            const u = new User()\n            \n            u.hydrate(user)\n\n            return u\n        }))\n        .then(setUsers)\n\n    const onUsernameChange = event => setUsername(event.target.value)\n    const onPasswordChange = event => setPassword(event.target.value)\n\n    const onLogin = () => api_request('POST', '/session', { username, password })\n        .then(res => res.data)\n        .then(({ id, username, firstName, lastName, email, createdAt }) => ({\n            type: 'users',\n            id,\n            attributes: {\n                username,\n                firstName,\n                lastName,\n                email,\n                createdAt: convert_datetime(createdAt)\n            }\n        }))\n        .then(setSession)\n\n    // Properties are passed in as a plain JavaScript object.\n    const ImageFigure = ({ image }) =>\n        <Figure>\n            <FigureImage src={image} width={400} />\n\n            <FigureCaption>Uploaded Image</FigureCaption>\n        </Figure>\n\n    return (\n        <Container>\n            <h1>Users and Authentication</h1>\n\n            <Button onClick={onGetUsers}>Get Users</Button>\n\n            <Table>\n                <thead>\n                    <tr>\n                        <th>ID</th>\n                        <th>Username</th>\n                        <th>E-mail Address</th>\n                        <th>First Name</th>\n                        <th>Last Name</th>\n                        <th>Joined On</th>\n                    </tr>\n                </thead>\n\n                <tbody>\n                    {users.map((user, index) =>\n                        <tr key={index}>\n                            <td>{user.id}</td>\n                            <td>{user.getAttribute('username')}</td>\n                            <td>{user.getAttribute('email')}</td>\n                            <td>{user.getAttribute('firstName')}</td>\n                            <td>{user.getAttribute('lastName')}</td>\n                            <td>{user.getAttribute('createdAt')}</td>\n                        </tr>\n                    )}\n                </tbody>\n            </Table>\n\n            <p>Logged in as: {session ? `${session.attributes.firstName} ${session.attributes.lastName}` : '(unauthenticated)'}</p>\n\n            <Form>\n                <Form.Group>\n                    <Form.Label>Username</Form.Label>\n                    <Form.Control type=\"text\"\n                                  placeholder=\"Enter username\"\n                                  onChange={onUsernameChange} />\n                </Form.Group>\n\n                <Form.Group>\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control type=\"password\"\n                                  placeholder=\"Enter password\"\n                                  onChange={onPasswordChange} />\n                </Form.Group>\n\n                <Button variant=\"primary\" onClick={onLogin}>Login</Button>\n            </Form>\n\n            <hr />\n\n            <h1>File Upload</h1>\n\n            <p>Note: you must be authenticated to upload images!</p>\n\n            {imageUrl && <ImageFigure image={imageUrl} />}\n\n            <Form>\n                <Form.File label=\"Upload an image\" onChange={onFileChanged} />\n                <Button variant=\"primary\" onClick={onSubmitFile}>Upload Image</Button>\n            </Form>\n        </Container>\n    )\n}\n","export default function upload_image(file) {\n    return fetch(`https://lamp.cse.fau.edu/~cen4010_s21_g01/uploads`, { method: 'POST', body: file })\n        .then(r => r.json())\n        .then(r => r.data)\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}