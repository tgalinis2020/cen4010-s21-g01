{"version":3,"sources":["utils/apiRequest.js","utils/convertDateTime.js","utils/formatDate.js","context/SessionContext.js","Models/Base.js","Models/User.js","utils/getPosts.js","utils/debouce.js","pages/dashboard/ExplorePage.jsx","components/CommentForm.jsx","components/BackButton.jsx","components/Comment.jsx","utils/getComments.js","utils/getPost.js","pages/PostPage.jsx","pages/dashboard/SubscriptionsPage.jsx","pages/dashboard/FavoritesPage.jsx","utils/uploadImage.js","hooks/useValidators.js","pages/settings/AccountPage.jsx","utils/getPets.js","pages/settings/PetsPage.jsx","pages/SettingsPage.jsx","utils/convertToJsonOrThrowError.js","pages/SignInPage.jsx","pages/SignUpPage.jsx","Models/Tag.js","Models/Post.js","pages/CreatePostPage.jsx","utils/getSession.js","Main.jsx","index.jsx"],"names":["apiRequest","method","target","data","url","init","headers","includes","JSON","stringify","fetch","convertDateTime","datetime","split","datePart","timePart","year","month","date","hours","minutes","seconds","Date","UTC","DAYS","MONTHS","formatDate","fromDB","getDay","getMonth","getDate","getFullYear","SessionContext","createContext","Base","obj","this","id","attributes","dirtyAttributes","relationships","attr","val","push","type","a","payload","then","res","json","relationship","objs","updateRelationship","map","toResourceIdentifier","User","password","hydrate","current","new","username","getAttribute","pet","updateToManyRelationship","post","getPosts","maxPosts","additionalParams","params","join","included","items","related","author","tags","image","title","text","createdAt","find","filter","debounce","time","callback","override","undefined","active","timeout","args","handler","apply","window","clearTimeout","setTimeout","ExplorePage","useContext","session","useState","posts","setPosts","searchMode","setSearchMode","history","useHistory","handleSearch","value","filterParam","key","useEffect","Form","Group","Control","placeholder","onChange","ButtonGroup","className","Button","onClick","icon","faPlus","Row","i","Col","xs","sm","md","Card","to","Img","src","Body","Title","Text","length","variant","CommentForm","onSubmitted","setText","inputRef","useRef","as","ref","user","catch","console","log","BackButton","style","cursor","faArrowCircleLeft","size","replace","Comment","avatar","width","height","borderRadius","border","alt","faUserCircle","Media","getComments","getPost","postId","pets","PostPage","setPost","comments","setComments","useParams","ListGroup","Item","faPaw","name","comment","faSpinner","pulse","SubscriptionsPage","FavoritesPage","uploadImage","file","body","FormData","append","useValidators","validators","initialState","Object","keys","dirty","error","fields","setFields","get","field","validate","reduce","fn","e","Promise","resolve","prev","set","isInvalid","getError","getValidity","all","allValid","valid","AccountPage","setSession","setAvatar","checkEmpty","newPassword","noValidate","Label","column","Feedback","span","offset","updatePassword","alert","status","File","custom","label","files","item","setAttribute","update","s","getPets","userId","isChecked","PetsPage","setPets","petName","createPet","promise","img","owner","SettingsPage","useRouteMatch","path","page","setPage","goToPage","p","charAt","toUpperCase","substr","exact","convertToJsonOrThrowError","SignInPage","setUsername","setPassword","debounced","setter","uid","subscriptions","SignUpPage","checkExists","pop","firstName","lastName","email","create","Tag","Post","tagmap","tag","hydratedTags","resource","newTags","r","concat","c","CreatePostPage","n","setFile","loading","setLoading","maxChars","test","Check","defaultChecked","index","plaintext","readOnly","defaultValue","tagList","t","trim","toLowerCase","petList","createPost","getSession","Anonymous","Nav","NavDropdown","faSignInAlt","faUser","Authenticated","ItemText","Divider","Link","faCog","faSignOutAlt","DashboardNav","location","pathname","pages","Dashboard","Main","sessionState","Provider","Navbar","bg","expand","Container","Brand","faBone","Toggle","aria-controls","Collapse","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.838a2dcb.chunk.js","sourcesContent":["function apiRequest(method, target, data = null) {\n    const url = `https://lamp.cse.fau.edu/~cen4010_s21_g01/api-v1.php${target}`\n    const init = {\n        method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept':       'application/json',\n        }\n    }\n\n    if (['POST', 'PUT', 'PATCH'].includes(method)) {\n        init['body'] = JSON.stringify({ data })\n    }\n\n    return fetch(url, init)\n}\n\nexport default apiRequest\n","/**\n * In MySQL, the DATETIME data type returns dates using the \"YYYY-MM-DD HH:II:SS\"\n * format.\n * \n * Also worth noting that dates are stored relative to UTC.\n * \n * @param {string} datetimeString\n * @returns {Date} A Date object initialized using provided string.\n */\nfunction convertDateTime(datetime) {\n    const [datePart, timePart] = datetime.split(' ')\n    const [year, month, date] = datePart.split('-')\n    const [hours, minutes, seconds] = timePart.split(':')\n\n    // Note: months start at zero, so Jan = 0, Feb = 1, and so on.\n    return new Date(Date.UTC(year, month - 1, date, hours, minutes, seconds))\n}\n\nexport default convertDateTime\n","import convertDateTime from './convertDateTime'\n\nconst DAYS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\nconst MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n                'Oct', 'Nov', 'Dec']\n\nfunction formatDate(fromDB) {\n    const date = convertDateTime(fromDB)\n\n    return `${DAYS[date.getDay()]}, ${MONTHS[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`\n}\n\nexport default formatDate","import { createContext } from 'react'\n\nconst SessionContext = createContext()\n\nexport default SessionContext","import apiRequest from '../utils/apiRequest'\n\nexport default class Base\n{\n    constructor(obj = {}) {\n        this.id = obj.id || null\n        this.attributes = obj.attributes || {}\n        this.dirtyAttributes = []\n        this.relationships = obj.relationships || {}\n    }\n\n    // Child classes must override this method!\n    get type() {\n        return 'generic'\n    }\n\n    hydrate(obj) {\n        this.id = obj.id || null\n        this.attributes = obj.attributes || {}\n        this.relationships = obj.relationships || {}\n\n        return this\n    }\n\n    setAttribute(attr, val) {\n        this.dirtyAttributes.push(attr)\n        this.attributes[attr] = val\n\n        return this\n    }\n\n    getAttribute(attr) {\n        return this.attributes[attr]\n    }\n\n    toResourceIdentifier() {\n        return {\n            type: this.type,\n            id:   this.id,\n        }\n    }\n\n    toResource() {\n        return {\n            type:       this.type,\n            id:         this.id,\n            attributes: this.attributes,\n        }\n    }\n\n    create(relationships = null) {\n        const attributes = {}\n\n        for (const a of this.dirtyAttributes) {\n            attributes[a] = this.attributes[a]\n        }\n\n        const payload = { type: this.type, attributes }\n\n        if (relationships !== null) {\n            payload['relationships'] = relationships\n        }\n\n        return apiRequest('POST', `/${this.type}`, payload)\n            .then((res) => {\n                this.dirtyAttributes = []\n\n                return res.json()\n            })\n            .then((res) => res.data)\n    }\n\n    update() {\n        const attributes = {}\n\n        for (const a of this.dirtyAttributes) {\n            attributes[a] = this.attributes[a]\n        }\n\n        const payload = { type: this.type, id: this.id, attributes }\n\n        return apiRequest('PATCH', `/${this.type}/${this.id}`, payload)\n            .then(() => {\n                this.dirtyAttributes = []\n\n                return this\n            })\n    }\n\n    delete() {\n        return apiRequest('DELETE', `/${this.type}/${this.id}`);\n    }\n\n    updateRelationship(method, relationship, payload) {\n        return apiRequest(\n            method,\n            `/${this.type}/${this.id}/relationships/${relationship}`,\n            payload\n        )\n    }\n\n    updateToManyRelationship(method, relationship, objs) {\n        return this.updateRelationship(\n            method,\n            relationship,\n            objs.map(obj => obj.toResourceIdentifier())\n        )\n    }\n\n    updateToOneRelationship(method, relationship, obj) {\n        return this.updateRelationship(\n            method,\n            relationship,\n            obj.toResourceIdentifier()\n        )\n    }\n}","import Base from './Base'\nimport apiRequest from '../utils/apiRequest'\n\nexport default class User extends Base\n{\n    get type() {\n        return 'users'\n    }\n\n    /**\n     * Creating users is a two-step process: a resource must be created and\n     * their password must be set immediately afterward.\n     * \n     * @param {string}   password\n     */\n    create(password) {\n        const type = this.type\n        const attributes = {}\n\n        for (const attr of this.dirtyAttributes) {\n            attributes[attr] = this.attributes[attr]\n        }\n\n        return apiRequest('POST', `/${type}`, { type, attributes })\n            .then(res => res.json())\n            .then(({ data }) => {\n                this.hydrate(data)\n                return apiRequest('PUT', `/passwords/${data.id}`, password)\n            }).then(res => this)\n    }\n\n    updatePassword(current, password) {\n        return apiRequest('PATCH', `/passwords/${this.id}`, { current, new: password })\n    }\n\n    login(password) {\n        return apiRequest('POST', '/session', {\n            username: this.getAttribute('username'),\n            password\n        })\n    }\n\n    logout() {\n        return apiRequest('DELETE', '/session')\n    }\n\n    subscribeTo(pet) {\n        return this.updateToManyRelationship('POST', 'subscriptions', [pet])\n    }\n\n    unsubscribeFrom(pet) {\n        return this.updateToManyRelationship('DELETE', 'subscriptions', [pet])\n    }\n\n    addFavorite(post) {\n        return this.updateToManyRelationship('POST', 'favorites', [post])\n    }\n\n    removeFavorite(post) {\n        return this.updateToManyRelationship('DELETE', 'favorites', [post])\n    }\n\n    like(post) {\n        return this.updateToManyRelationship('POST', 'liked-posts', [post])\n    }\n\n    unlike(post) {\n        return this.updateToManyRelationship('DELETE', 'liked-posts', [post])\n    }\n}","import apiRequest from './apiRequest'\nimport formatDate from './formatDate'\n\n/**\n * Since both the explore and subscriptions pages hit the same endpoint but\n * with different parameters, it was worth abstracting shared logic into its\n * own utility function.\n * \n * @param {string[]} additionalParams \n * @returns Promise containing returned posts with their authors and tags.\n */\nfunction getPosts(maxPosts, additionalParams = []) {\n    const params = [\n        'include=author,tags',\n        'fields[users]=username',\n        'sort=-createdAt',\n        ...additionalParams,\n    ]\n\n    if (maxPosts !== null) {\n        params.push(`page[size]=${maxPosts}`)\n    }\n\n    return apiRequest('GET', `/posts?${params.join('&')}`)\n        .then((res) => res.json())\n        .then(({ data, included }) => {\n            const items = []\n\n            for (const { id, attributes, relationships } of data) {\n                \n                // TODO:    Pets and likes should be here as well but they are\n                //          not represented in the front-end yet.\n                // Note that some relationships might not be available, such as\n                // tags.\n                const related = {\n                    author: relationships.author.data.id,\n                    tags: 'tags' in relationships ? relationships.tags.data.map(({ id }) => id) : [],\n                }\n\n                items.push({\n                    id,\n                    image: attributes.image,\n                    title: attributes.title,\n                    text: attributes.text,\n                    createdAt: formatDate(attributes.createdAt),\n\n                    // Posts MUST have an author so it should be safe to assume\n                    // that the find method returns a resource object of\n                    // type \"users\".\n                    author: included\n                        .find(({ type, id }) => type === 'users' && id === related.author)\n                        .attributes\n                        .username,\n\n                    tags: included\n                        .filter(({ type, id }) => type === 'tags' && related.tags.includes(id))\n                        .map(({ attributes }) => attributes.text),\n                })\n            }\n\n            return items\n        })\n}\n\nexport default getPosts","// A decorator function that runs the callback only when a certain\n// amount of time has passed since the last time the function was invoked.\n//\n// Inspired by the following implementation by David Walsh:\n// https://davidwalsh.name/javascript-debounce-function\nfunction debounce(time, callback, override = undefined) {\n    let active = false\n    let timeout = null\n\n    return function (...args) {\n        // Run the following after the timeout is complete.\n        //\n        // A nice quirk of arrow functions is that they have no \"this\",\n        // so one can reference the parent context without setting it to\n        // another variable. Before arrow functions were introduced,\n        // it was common to do \"var self = this\" to reference the parent\n        // function's context.\n        const handler = () => {\n            callback.apply(this, args)\n            active = false\n        }\n\n        active && window.clearTimeout(timeout)\n\n        // If override condition is set, ignore debouncing behavior.\n        if (typeof override === 'function' && override.apply(this, args)) {\n            handler()\n        } else {\n            timeout = window.setTimeout(handler, time)\n            active = true\n        }\n    }\n}\n\nexport default debounce\n","import { useEffect, useState, useContext } from 'react'\n\nimport { Link, useHistory } from 'react-router-dom'\n\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Card from 'react-bootstrap/Card'\nimport Button from 'react-bootstrap/Button'\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus } from '@fortawesome/free-solid-svg-icons'\n\nimport SessionContext from '../../context/SessionContext'\nimport getPosts from '../../utils/getPosts'\nimport debounce from '../../utils/debouce'\n\nfunction ExplorePage() {\n    const [session, setSession] = useContext(SessionContext)\n    const [posts, setPosts] = useState([])\n    //const [moreAvailable, setMoreAvailable] = useState(true)\n    const [searchMode, setSearchMode] = useState(false)\n    const history = useHistory()\n\n    //const addPosts = (newPosts) => setPosts((oldPosts) => oldPosts.concat(newPosts))\n\n    const goToCreatePost = () => history.push('/post')\n    \n    //const seeMorePosts = () => {}\n\n    const handleSearch = debounce(\n        1000, // Wait for one second before doing anything.\n\n        ({ target }) => {\n\n            if (target.value === '') {\n\n                if (searchMode) {    \n\n                    setSearchMode(false)\n\n                    getPosts().then(setPosts)\n\n                }\n\n            } else {\n\n                const filterParam = `filter[tags.text][in]=${target.value.split(' ').join(',')}`\n\n                setSearchMode(true)\n\n                getPosts(null, [filterParam]).then(setPosts)\n\n            }\n\n        },\n\n        ({ key, target }) => key === 'Enter' || (key === 'Backspace' && target.value === '')\n    )\n    \n    useEffect(() => {\n        getPosts(session === null ? 10 : null)\n            .then(setPosts)\n    }, [])\n\n    return (\n        <>\n            {session && (\n                <Form>\n                    <Form.Group>\n                        <Form.Control\n                            type=\"text\"\n                            placeholder=\"Search for posts by tag...\"\n                            onChange={handleSearch} />\n                    </Form.Group>\n\n                    <ButtonGroup className=\"my-2\">\n                        <Button className=\"ml-auto\" onClick={goToCreatePost}>\n                            <FontAwesomeIcon className=\"mr-2\" icon={faPlus} />\n                            Create Post\n                        </Button>\n                    </ButtonGroup>\n                </Form>\n            )}\n\n            <Row>\n                {posts.map(({ id, image, title, author, text, createdAt, tags }, i) => (\n                    <Col key={i} xs={12} sm={6} md={4}>\n                        <Card className=\"my-4\">\n                            <Link to={`/post/${id}`}>\n                                <Card.Img src={image} />\n                            </Link>\n\n                            <Card.Body>\n                                <Card.Title>{title}</Card.Title>\n\n                                <Card.Text>\n                                    <small className=\"text-muted\">Posted by {author} on {createdAt}</small>\n                                    \n                                    <p>{text}</p>\n                                    \n                                    {tags.length > 0 && (\n                                        <p className=\"text-muted\">Tags: {tags.join(', ')}</p>\n                                    )}\n                                </Card.Text>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                ))}\n            </Row>\n\n            {posts.length === 0 && (\n                <p>There are currently no posts.</p>\n            )}\n\n            {session === null && (\n                <div className=\"my-4 text-center\">\n                    <p>You must be logged in to see more posts. <Button variant=\"primary\" onClick={() => history.push('/signin')}>Sign in</Button></p>\n                    <p>Don't have an account? <Button variant=\"primary\" onClick={() => history.push('/signup')}>Sign up</Button></p>\n                </div>\n            )}\n\n            {/*moreAvailable && (\n                <ButtonGroup className=\"d-block text-center my-4\">\n                    <Button onClick={seeMorePosts}>See More</Button>\n                </ButtonGroup>\n            )*/}\n        </>\n    )\n}\n\nexport default ExplorePage","import { useState, useRef } from 'react'\n\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport apiRequest from '../utils/apiRequest'\nimport { faPlus } from '@fortawesome/free-solid-svg-icons'\n\nfunction CommentForm({ post, session, onSubmitted }) {\n    const [text, setText] = useState('')\n    const inputRef = useRef(null)\n    \n    const submit = () => apiRequest('POST', '/comments', {\n            type: 'comments',\n            attributes: { text },\n            relationships: {\n                author: {\n                    data: { type: 'users', id: session.user.id }\n                },\n\n                post: {\n                    data: { type: 'posts', id: post.id }\n                }\n            }\n        })\n        .then((res) => res.json())\n        .then((res) => res.data)\n        .then(onSubmitted)\n        .then(() => setText(''))\n        .then(() => {\n            inputRef.current.value = ''\n        })\n        .catch(console.log)\n\n    return (\n        <Form>\n            <Form.Group>\n                <Form.Control as=\"textarea\" ref={inputRef} onChange={({ target }) => setText(target.value)}></Form.Control>\n            </Form.Group>\n\n            <Form.Group>\n                <Button variant=\"primary\" onClick={submit}>\n                    <FontAwesomeIcon className=\"mr-2\" icon={faPlus} />\n                    Add Comment\n                </Button>\n            </Form.Group>\n        </Form>\n    )\n}\n\nexport default CommentForm","import { useHistory } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faArrowCircleLeft } from '@fortawesome/free-solid-svg-icons'\n\nfunction BackButton() {\n    const history = useHistory()\n\n    return (\n        <FontAwesomeIcon\n            style={{ cursor: \"pointer\" }}\n            className=\"mr-3\"\n            icon={faArrowCircleLeft}\n            size=\"1x\"\n            onClick={() => history.replace('/dashboard')} />\n    )\n}\n\nexport default BackButton","import Media from 'react-bootstrap/Media'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUserCircle } from '@fortawesome/free-solid-svg-icons'\n\nfunction Comment({ text, createdAt, author }) {\n    const commentStyles = {\n        width: '64px',\n        height: '64px',\n        borderRadius: '50%',\n        border: '1px solid #ccc' \n    }\n    \n    const image = author.avatar\n        ? <img style={commentStyles} className=\"mr-3\" src={author.avatar} alt={`${author.username}'s profile picture`} />\n        : <FontAwesomeIcon className=\"mr-3\" size=\"4x\" icon={faUserCircle} />\n\n    return (\n        <Media className=\"mb-4\">\n            {image}\n\n            <Media.Body>\n                <small className=\"text-muted\">Posted by {author.username} on {createdAt}</small>\n                <p>{text}</p>\n            </Media.Body>\n        </Media>\n    )\n}\n\nexport default Comment","import apiRequest from \"./apiRequest\"\nimport formatDate from \"./formatDate\"\n\nfunction getComments(id) {\n    const params = [\n        'include=author',\n        'fields[users]=username,avatar',\n        'sort=-createdAt',\n    ]\n\n    return apiRequest('GET', `/posts/${id}/comments?${params.join('&')}`)\n        .then((res) => res.json())\n        .then(({ data, included }) => data.map(({ id, attributes, relationships }) =>({\n            id,\n            text: attributes.text,\n            createdAt: formatDate(attributes.createdAt),\n            author: included\n                .find(({ id }) => id === relationships.author.data.id)\n                .attributes,\n        })))\n}\n\nexport default getComments\n","import apiRequest from \"./apiRequest\"\nimport formatDate from \"./formatDate\"\n\nfunction getPost(postId) {\n    const params = [\n        'include=author,tags,pets',\n        'fields[users]=username,avatar',\n    ]\n\n    return apiRequest('GET', `/posts/${postId}?${params.join('&')}`)\n        .then((res) => res.json())\n        .then(({ data, included }) => {\n            const { id, attributes, relationships } = data\n            const { image, title, text, createdAt } = attributes\n            \n            const related = {\n                author: relationships.author.data.id,\n            }\n\n            // Pluck the IDs from to-many relationships, if applicable.\n            for (const key of ['tags', 'pets', 'likes']) {\n                related[key] = key in relationships\n                    ? relationships[key].data.map(({ id }) => id)\n                    : []\n            }\n\n            return {\n                id,\n                image,\n                title,\n                text,\n                createdAt: formatDate(createdAt),\n\n                author: included\n                    .find(({ type, id }) => type === 'users' && id === related.author)\n                    .attributes,\n\n                tags: included\n                    .filter(({ type, id }) => type === 'tags' && related.tags.includes(id))\n                    .map(({ attributes }) => attributes.text),\n\n                pets: included\n                    .filter(({ type, id }) => type === 'pets' && related.pets.includes(id)),\n            }\n        })\n}\n\nexport default getPost","import { useState, useEffect, useContext } from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport Card from 'react-bootstrap/Card'\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Media from 'react-bootstrap/Media'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaw, faUserCircle, faSpinner } from '@fortawesome/free-solid-svg-icons'\n\nimport CommentForm from '../components/CommentForm'\nimport BackButton from '../components/BackButton'\nimport Comment from '../components/Comment'\nimport SessionContext from '../context/SessionContext'\nimport getComments from '../utils/getComments'\nimport getPost from '../utils/getPost'\n\nfunction PostPage() {\n    const [session] = useContext(SessionContext)\n    const [post, setPost] = useState(null)\n    const [comments, setComments] = useState([])\n    const { id } = useParams()\n\n    const avatarStyle = {\n        width: '64px',\n        height: '64px',\n        borderRadius: '50%',\n        border: '1px solid #ccc',\n    }\n\n    useEffect(() => {\n        getPost(id)\n            .then(setPost)\n            .then(() => getComments(id))\n            .then(setComments)\n    }, [])\n\n    return (\n        <>\n            {post ? (\n                <>\n                    <h1><BackButton />{post.title}</h1>\n\n                    <Card className=\"my-4\">\n                        <Card.Img src={post.image} />\n\n                        <Card.Body>\n                            <Card.Text>\n                                <Media className=\"mb-4\">\n                                    {post.author.avatar ? (\n                                        <img style={avatarStyle} className=\"mr-3\" src={post.author.avatar} alt={`${post.author.username}'s profile picture`} />\n                                    ) : (\n                                        <FontAwesomeIcon className=\"mr-3\" size=\"4x\" icon={faUserCircle} />\n                                    )}\n\n                                    <Media.Body>\n                                        <small className=\"text-muted\">Posted by {post.author.username} on {post.createdAt}</small>\n                                        \n                                        <p>{post.text}</p>\n                                    </Media.Body>\n                                </Media>\n                                \n                                {post.pets.length > 0 && (\n                                    <div className=\"my-3\">\n                                        <p className=\"text-muted\">{post.author.username}'s pets in this post:</p>\n\n                                        <ListGroup>\n                                            {post.pets.map((pet, i) => (\n                                                <ListGroup.Item key={i}>\n                                                    <Media>\n                                                        {pet.avatar === null ? (\n                                                            <FontAwesomeIcon icon={faPaw} size=\"2x\" className=\"d-block mr-3\" />\n                                                        ) : (\n                                                            <img\n                                                                style={{ width: '64px', height: '64px', borderRadius: '50%' }}\n                                                                src={pet.avatar}\n                                                                className=\"mr-3\"\n                                                            />\n                                                        )}\n                                                        <Media.Body>\n                                                            {pet.name}\n\n                                                            {/*<Button className=\"d-block float-right\" variant=\"success\">Subscribe</Button>*/}\n                                                        </Media.Body>\n                                                    </Media>\n                                                </ListGroup.Item>\n                                            ))}\n                                        </ListGroup>\n                                    </div>\n                                )}\n\n                                {post.tags.length > 0 && (\n                                    <p className=\"text-muted\">Tags: {post.tags.join(', ')}</p>\n                                )}\n                            </Card.Text>\n                        </Card.Body>\n                    </Card>\n\n                    \n                    {session && <CommentForm session={session} post={post} onSubmitted={getComments} />}\n\n                    <hr />\n\n                    <h3 className=\"mb-4\">Comments ({comments.length})</h3>\n\n                    {comments.length > 0 ? (\n                        comments.map((comment, i) => <Comment key={i} {...comment} />)\n                    ) : (\n                        <p>No comments available.</p>\n                    )}\n                </>\n            ) : (\n                <p className=\"text-center my-4\"><FontAwesomeIcon icon={faSpinner} size=\"3x\" pulse /></p>\n            )}\n        </>\n    )\n}\n\nexport default PostPage","function SubscriptionsPage() {\n    return (\n        <h1>Subscriptions</h1>\n    )\n}\n\nexport default SubscriptionsPage","function FavoritesPage() {\n    return (\n        <h1>Favorites</h1>\n    )\n}\n\nexport default FavoritesPage","function uploadImage(file) {\n    const url = `https://lamp.cse.fau.edu/~cen4010_s21_g01/api-v1.php/upload`\n    const body = new FormData()\n\n    body.append('data', file, file.name)\n\n    return fetch(url, { method: 'POST', body })\n}\n\nexport default uploadImage\n","import { useState } from 'react'\n\nimport debounce from '../utils/debouce'\n\n/**\n * A custom hook to ease the form validation process.\n * \n * Validators is an object where the key corresponds to a form field\n * and the value is an array of validation functions.\n * \n * Each validation function must return a promise that itself returns\n * a validation message. If the validation message is null, the field is\n * considered valid.\n * \n * Although it may be inconvenient, promises are used because some validation\n * strategies involve HTTP requests (e.g. checking if a username already exists).\n * For validation that is immediately resolved, return the error message using\n * Promise.resolve.\n */\n function useValidators(validators) {\n    const initialState = {}\n\n    for (const field of Object.keys(validators)) {\n        initialState[field] = { value: '', dirty: false, error: null }\n    }\n\n    const [fields, setFields] = useState(initialState)\n\n    const get = (field) => fields[field].value\n\n    const isInvalid = (field) => fields[field].dirty && fields[field].error !== null\n        \n    const getError = (field) => fields[field].error\n\n    const validate = (field, value) => validators[field]\n        .reduce((a, fn) => a.then((e) => e ?? fn(value, get)), Promise.resolve(null))\n        .then((error) => {\n            setFields((prev) => ({\n                ...prev,\n                [field]: { value, dirty: true, error }\n            }))\n\n            return error === null\n        })\n        .catch(() => {\n            setFields((prev) => ({\n                ...prev,\n                [field]: { value, dirty: true, error: 'Invalid value.' }\n            }))\n\n            return false\n        })\n\n    const set = (field) => debounce(\n        500,\n\n        // Go through each validation function and stop the promise chain\n        // when an error is not null.\n        //\n        // Note: a === accumilated promise\n        //       c === current promise\n        //       e === error message\n        ({ target }) => validate(field, target.value),\n\n        ({ key, target }) => key === 'Enter' || (key === 'Backspace' && target.value === '')\n    )\n        \n    // This eyesore goes through all of the validators for each field\n    // and returns the overall state of the set of fields.\n    const getValidity = () => Promise.all(\n            Object.keys(fields)\n                .map((field) => validate(field, fields[field].value)\n            )\n        )\n        .then((res) => res.reduce((allValid, valid) => allValid && valid, true))\n\n    return { get, set, isInvalid, getError, getValidity }\n}\n\nexport default useValidators","import { useContext, useState } from 'react'\n\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\nimport uploadImage from '../../utils/uploadImage'\nimport useValidators from '../../hooks/useValidators'\nimport SessionContext from '../../context/SessionContext'\n\nfunction AccountPage() {\n    const [session, setSession] = useContext(SessionContext)\n    const [avatar, setAvatar] = useState(null)\n\n    const checkEmpty = (field) => (value) => Promise\n        .resolve(value === '' ? `${field} cannot be empty.` : null)\n\n    const checkMatchesPassword = (value, get) => Promise\n        .resolve(value === get('password') ? 'Passwords should not match' : null)\n\n    const fields = useValidators({\n        password: [\n            checkEmpty('Password'),\n        ],\n\n        newPassword: [\n            checkEmpty('New password'),\n            checkMatchesPassword,\n        ],\n    })\n\n    const updatePassword = () => session.user\n        .updatePassword(fields.get('password'), fields.get('newPassword'))\n        .then((res) => {\n            window.alert(res.status === 204\n                ? 'Password updated!'\n                : 'An error occured while attempting to update your password.'\n            )\n        })\n\n    const updateAvatar = () => uploadImage(avatar)\n        .then((res) => res.json())\n        .then((res) => res.data)\n        .then((url) => session.user.setAttribute('avatar', url))\n        .then((user) => user.update())\n        .then((user) => setSession((s) => ({ ...s, user })))\n        .then(() => window.alert('Avatar updated!'))\n\n    return (\n        <>\n            <Form noValidate>\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Current Password</Form.Label>\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('password')}\n                            type=\"password\"\n                            placeholder=\"Current password\"\n                            onChange={fields.set('password')} />\n                        \n                        {fields.isInvalid('password') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('password')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>New Password</Form.Label>\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('newPassword')}\n                            type=\"password\"\n                            placeholder=\"New password\"\n                            onChange={fields.set('newPassword')} />\n                        \n                        {fields.isInvalid('newPassword') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('newPassword')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Col sm={{ span: 10, offset: 2 }}>\n                        <Button variant=\"primary\" onClick={updatePassword}>Update Password</Button>\n                    </Col>\n                </Form.Group>\n            </Form>\n\n            <hr />\n\n            <Form noValidate>\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Avatar</Form.Label>\n                    <Col sm={10}>\n                        <Form.File\n                            custom\n                            label={avatar ? avatar.name : 'Upload an image'}\n                            onChange={({ target }) => setAvatar(target.files.item(0))} />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Col sm={{ span: 10, offset: 2 }}>\n                        <Button variant=\"primary\" onClick={updateAvatar}>Update Avatar</Button>\n                    </Col>\n                </Form.Group>\n            </Form>\n        </>\n    )\n}\n\nexport default AccountPage","import apiRequest from \"./apiRequest\"\n\nfunction getPets(userId) {\n    return apiRequest('GET', `/users/${userId}/pets`)\n        .then((res) => res.json())\n        .then(({ data }) => data.map(({ id, attributes }) => ({\n            id,\n            image: attributes.image,\n            name: attributes.name,\n            isChecked: false\n        })))\n}\n\nexport default getPets","import { useContext, useEffect, useState } from 'react'\n\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Media from 'react-bootstrap/Media'\nimport ListGroup from 'react-bootstrap/ListGroup'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaw } from '@fortawesome/free-solid-svg-icons'\n\nimport apiRequest from '../../utils/apiRequest'\nimport uploadImage from '../../utils/uploadImage'\nimport getPets from '../../utils/getPets'\nimport SessionContext from '../../context/SessionContext'\nimport useValidators from '../../hooks/useValidators'\n\nfunction PetsPage() {\n    const [session] = useContext(SessionContext)\n    const [avatar, setAvatar] = useState(null)\n    const [pets, setPets] = useState([])\n\n    const checkEmpty = (field) => (value) => Promise\n        .resolve(value === '' ? `${field} cannot be empty.` : null)\n\n    const checkNotExists = (value) => Promise\n        .resolve(pets.includes(value) ? `You already have a pet named \"${value}.\"` : null)\n        \n    const fields = useValidators({\n        petName: [\n            checkEmpty('Pet name'),\n            checkNotExists,\n        ]\n    })\n\n    const createResource = (image) => ({\n        type: 'pets',\n\n        attributes: {\n            name: fields.get('petName'),\n            avatar: image,\n        },\n        \n        relationships: {\n            owner: {\n                data: { type: 'users', id: session.user.id }\n            }\n        }\n    })\n\n    const createPet = () => {\n        const promise = Promise.resolve(null)\n\n        if (avatar !== null) {\n            promise\n                .then(() => uploadImage(avatar))\n                .then((res) => res.json())\n                .then((res) => res.data)\n        }\n\n        return promise\n            .then((img) => apiRequest('POST', '/pets', createResource(img)))\n            .then((res) => res.json())\n            .then((res) => res.data)\n            .then(({ id, attributes }) =>\n                setPets((pets) => ([...pets, {\n                    id,\n                    name: attributes.name,\n                    avatar: attributes.avatar,\n                }]))\n            )\n    }\n\n    const handleAddPet = () => fields.getValidity()\n        .then((valid) => (valid && createPet()))\n\n    useEffect(() => {\n       getPets().then(setPets)\n    }, [setPets])\n\n    return (\n        <>\n            <Form noValidate>\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Pet Name</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('petName')}\n                            type=\"text\"\n                            placeholder=\"Enter you pet's name\"\n                            onChange={fields.set('petName')} />\n                        \n                        {fields.isInvalid('petName') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('petName')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Pet Avatar</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.File\n                            custom\n                            label=\"Upload an image\"\n                            onChange={({ target }) => setAvatar(target.files.item(0))} />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Col sm={{ span: 10, offset: 2 }}>\n                        <Button variant=\"primary\" onClick={handleAddPet}>Add Pet</Button>\n                    </Col>\n                </Form.Group>\n            </Form>\n\n            <hr />\n\n            <h3>Pets</h3>\n\n            {pets.length > 0 ? (\n                <ListGroup>\n                    {pets.map((pet, i) => (\n                        <ListGroup.Item key={i}>\n                            <Media>\n                                {pet.avatar === null ? (\n                                    <FontAwesomeIcon icon={faPaw} size=\"2x\" className=\"d-block mr-3\" />\n                                ) : (\n                                    <img\n                                        style={{ width: '64px', height: '64px', borderRadius: '50%' }}\n                                        src={pet.avatar}\n                                        className=\"mr-3\"\n                                    />\n                                )}\n                                <Media.Body>\n                                    {pet.name}\n\n                                    {/*<Button className=\"d-block float-right\" variant=\"success\">Subscribe</Button>*/}\n                                </Media.Body>\n                            </Media>\n                        </ListGroup.Item>\n                    ))}\n                </ListGroup>\n            ) : (\n                <p>You have no pets!</p>\n            )}\n        </>\n    )\n}\n\nexport default PetsPage","import { useContext, useState } from 'react'\nimport { Switch, Route, Redirect, useRouteMatch, useHistory } from 'react-router-dom'\n\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Nav from 'react-bootstrap/Nav'\nimport Button from 'react-bootstrap/Button'\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport BackButton from '../components/BackButton'\n\nimport AccountPage from './settings/AccountPage'\nimport PetsPage from './settings/PetsPage'\n\nfunction SettingsPage() {\n    const { url, path } = useRouteMatch()\n    const history = useHistory()\n    const pages = ['account', 'pets'/*, 'subscriptions'*/]\n    const [page, setPage] = useState('account')\n    const goToPage = p => () => {\n        setPage(p)\n        history.replace(`${url}/${p}`)\n    }\n\n    return (\n        <>\n            <h1><BackButton />Settings</h1>\n\n            <ButtonGroup className=\"d-flex my-4\">\n                {pages.map((p, i) => (\n                    <Button\n                        key={i}\n                        variant={p === page ? 'primary' : 'secondary'}\n                        onClick={goToPage(p)}>{`${p.charAt(0).toUpperCase()}${p.substr(1)}`}</Button>\n                ))}\n            </ButtonGroup>\n\n            <Switch>\n                <Route path={`${path}/account`}>\n                    <AccountPage />\n                </Route>\n\n                <Route path={`${path}/pets`}>\n                    <PetsPage />\n                </Route>\n\n                <Route path={`${path}/subscriptions`}>\n                    <p>Manage Subscriptions</p>\n                </Route>\n\n                <Route exact path={`${path}`}>\n                    <Redirect to={`${url}/account`} />\n                </Route>\n            </Switch>\n        </>\n    )\n}\n\nexport default SettingsPage","/**\n * If the response's status code does not match the one provided, the inner\n * function will throw an error.\n * \n * @param {number} status \n * @returns \n */\n function convertToJsonOrThrowError(status) {\n    return function (res) {\n        if (res.status !== status) {\n            throw res.status\n        }\n\n        return res.json()\n    }\n}\n\nexport default convertToJsonOrThrowError","import { useContext, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Form from 'react-bootstrap/Form'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Button from 'react-bootstrap/Button'\n\nimport BackButton from '../components/BackButton'\n\nimport apiRequest from '../utils/apiRequest'\nimport debounce from '../utils/debouce'\nimport convertToJsonOrThrowError from '../utils/convertToJsonOrThrowError'\nimport User from '../Models/User'\nimport SessionContext from '../context/SessionContext'\n\nfunction SignInPage() {\n    const [session, setSession] = useContext(SessionContext)\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const history = useHistory()\n\n    const login = () => apiRequest('POST', '/session', { username, password })\n        .then(convertToJsonOrThrowError(201))\n        .then((res) => res.data)\n        .then(({ uid }) => apiRequest('GET', `/users/${uid}?include=subscriptions`))\n        .then((res) => res.json())\n        .then(({ data, included }) => ({\n            user: new User(data),\n            subscriptions: included.map(({ id }) => id),\n        }))\n        .then(setSession)\n        .then(() => history.replace('/dashboard'))\n        .catch((error) => {\n            console.error(error)\n            // TODO: alerts don't look so nice, replace with something fancier\n            window.alert('Invalid username/password combination!')\n        })\n\n    const debounced = setter => debounce(\n        500,\n\n        ({ target }) => setter(target.value),\n\n        // Ignore debouncing when enter or backspace keys are pressed.\n        ({ key, target }) => key === 'Enter' || (key === 'Backspace' && target.value === '')\n    )\n\n    return (\n        <>\n            <h1 className=\"mb-4\"><BackButton />Sign In</h1>\n\n            <Form>\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Username</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            type=\"text\"\n                            placeholder=\"Enter username\"\n                            onChange={debounced(setUsername)} />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Password</Form.Label>\n                    <Col sm={10}>\n                        <Form.Control\n                            type=\"password\"\n                            placeholder=\"Enter password\"\n                            onChange={debounced(setPassword)} />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Col sm={{ span: 10, offset: 2 }}>\n                        <Button variant=\"primary\" onClick={login}>Sign In</Button>\n                    </Col>\n                </Form.Group>\n            </Form>\n        </>\n    )\n}\n\nexport default SignInPage","import { useContext, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\n\nimport User from '../Models/User'\n\nimport apiRequest from '../utils/apiRequest'\nimport uploadImage from '../utils/uploadImage'\nimport useValidators from '../hooks/useValidators'\n\nimport BackButton from '../components/BackButton'\nimport SessionContext from '../context/SessionContext'\n\nfunction SignUpPage() {\n    const [avatar, setAvatar] = useState(null)\n    const [session, setSession] = useContext(SessionContext)\n    const history = useHistory()\n    \n    const checkEmpty = (field = 'Value') => (value) => Promise\n        .resolve(value === '' ? `${field} cannot be empty.` : null)\n\n    const checkExists = (field, label = null) => (value) =>\n        apiRequest('GET', `/users?filter[${field}]=${value}`)\n            .then(res => res.json())\n            .then(\n                ({ data }) => typeof data.pop() === 'undefined'\n                    ? null \n                    : `Provided ${label || field} is already in use.`\n            )\n\n    const fields = useValidators({\n        username: [\n            checkEmpty('Username'),\n            checkExists('username'),\n        ],\n\n        password: [\n            checkEmpty('Password'),\n        ],\n\n        firstName: [\n            checkEmpty('First name'),\n        ],\n\n        lastName: [\n            checkEmpty('Last name'),\n        ],\n\n        email: [\n            checkEmpty('E-mail address'),\n            checkExists('email', 'e-mail address')\n        ],\n    })\n\n    const user = new User()\n\n    const handleSubmit = () => fields.getValidity()\n        .then((valid) => (valid && user\n            .setAttribute('firstName', fields.get('firstName'))\n            .setAttribute('lastName', fields.get('lastName'))\n            .setAttribute('email', fields.get('email'))\n            .setAttribute('username', fields.get('username'))\n            .create(fields.get('password'))\n            .then(() => {\n                const promise = apiRequest('POST', '/session', {\n                    username: fields.get('username'),\n                    password: fields.get('password'),\n                })\n\n                if (avatar !== null) {\n                    promise\n                        .then(() => uploadImage(avatar))\n                        .then((res) => res.json())\n                        .then(({ data }) => user.setAttribute('avatar', data))\n                        .then((user) => user.update())\n                }\n\n                return promise\n            })\n            .then(() => setSession({ user, subscriptions: [] }))\n            .then(() => history.replace('/dashboard'))\n            .catch(console.log)\n        ))\n\n    return (\n        <>\n            <h1 className=\"mb-4\"><BackButton />Sign Up</h1>\n\n            <Form noValidate>\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>First Name</Form.Label>\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('firstName')}\n                            type=\"text\"\n                            placeholder=\"Enter first name\"\n                            onChange={fields.set('firstName')} />\n\n                        {fields.isInvalid('firstName') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('firstName')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Last Name</Form.Label>\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('lastName')}\n                            type=\"text\"\n                            placeholder=\"Enter last name\"\n                            onChange={fields.set('lastName')} />\n\n                        {fields.isInvalid('lastName') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('lastName')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>E-mail Address</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('email')}\n                            type=\"text\"\n                            placeholder=\"Enter e-mail address\"\n                            onChange={fields.set('email')} />\n\n                        {fields.isInvalid('email') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('email')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Username</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('username')}\n                            type=\"text\"\n                            placeholder=\"Enter username\"\n                            onChange={fields.set('username')} />\n\n                        {fields.isInvalid('username') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('username')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Password</Form.Label>\n                    <Col sm={10}>\n                        <Form.Control\n                            isInvalid={fields.isInvalid('password')}\n                            type=\"password\"\n                            placeholder=\"Enter password\"\n                            onChange={fields.set('password')} />\n                        \n                        {fields.isInvalid('password') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('password')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Avatar</Form.Label>\n                    <Col sm={10}>\n                        <Form.File\n                            custom\n                            label=\"Upload an image\"\n                            onChange={({ target }) => setAvatar(target.files.item(0))} />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Col sm={{ span: 10, offset: 2 }}>\n                        <Button variant=\"primary\" onClick={handleSubmit}>Sign Up</Button>\n                    </Col>\n                </Form.Group>\n            </Form>\n        </>\n    )\n}\n\nexport default SignUpPage","import Base from './Base'\n\nexport default class Tag extends Base\n{\n    get type() {\n        return 'tags'\n    }\n}","import apiRequest from '../utils/apiRequest'\nimport Base from './Base'\nimport Tag from './Tag'\n\nexport default class Post extends Base\n{\n    get type() {\n        return 'posts'\n    }\n\n    // Posts should immediately be associated with an author upon creation.\n    // Note that provided tags may not exist in the backend so they might have\n    // to be created on-the-fly.\n    create(author = null, tags = [], pets = []) {\n        const tagmap = {}\n\n        // The value in the tag map determines whether or not a tag exists\n        // in the backend.\n        for (const tag of tags) {\n            tagmap[tag] = false\n        }\n\n        return apiRequest('GET', `/tags?filter[text][in]=${tags.join(',')}`)\n            .then((res) => res.json())\n            .then(({ data }) => {\n                const hydratedTags = []\n    \n                for (const resource of data) {\n                    const tag = new Tag(resource)\n                    tagmap[tag.getAttribute('text')] = true\n                    hydratedTags.push(tag)\n                }\n    \n                // Tags that were not returned from the query will still have\n                // their value set to false. Need to create them.\n                const newTags = tags.filter(tag => tagmap[tag] === false)\n    \n                // The API does not support creating entities in bulk.\n                // Need to make one request for each new tag.\n                if (newTags.length > 0) {\n                    return Promise\n                        .all(newTags.map(text => apiRequest('POST', '/tags', { type: 'tags', attributes: { text }})))\n                        .then(r => Promise.all(r.map(res => res.json()))) // Converting returned data to JSON returns a promise\n                        .then(r => r.map(({ data }) => new Tag(data)))\n                        .then(r => r.concat(hydratedTags))\n                } else {\n                    return hydratedTags\n                }\n            })\n            .then((tags) => {\n                const r = {}\n                let c = 0\n    \n                if (author !== null) {\n                    r['author'] = { data: author.toResourceIdentifier() }\n                    c++\n                }\n    \n                if (pets.length > 0) {\n                    r['pets'] = { data: pets.map((id) => ({ type: 'pets', id })) }\n                    c++\n                }\n\n                if (tags.length > 0) {\n                    r['tags'] = { data: tags.map(tag => tag.toResourceIdentifier()) }\n                    c++\n                }\n    \n                return c > 0 ? r : null\n            })\n            .then((relationships) => super.create(relationships))\n            .then((resource) => this.hydrate(resource))\n    }\n}","import { useContext, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router'\n\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faSpinner } from '@fortawesome/free-solid-svg-icons'\n\nimport uploadImage from '../utils/uploadImage'\nimport Post from '../Models/Post'\nimport BackButton from '../components/BackButton'\nimport SessionContext from '../context/SessionContext'\nimport useValidators from '../hooks/useValidators'\nimport getPets from '../utils/getPets'\n\n\nfunction CreatePostPage() {\n    const [file, setFile] = useState(null)\n    const [pets, setPets] = useState([])\n    const [loading, setLoading] = useState(true)\n    const [session] = useContext(SessionContext)\n    const history = useHistory()\n\n    const minChars = (label, n) => (value) => Promise\n        .resolve(value.length < n ? `${label} must be ${n} or more characters long.` : null)\n\n    const maxChars = (label, n) => (value) => Promise\n        .resolve(value.length > n ? `${label} length cannot exceed ${n} characters.` : null)\n\n    const lettersOnly = (value) => Promise\n        .resolve(/^[A-Za-z ]*$/.test(value) ? null : 'Each tag must be a word separated by a space.')\n\n    const fields = useValidators({\n        title: [\n            minChars('Post title', 10),\n            maxChars('Post title', 35),\n        ],\n\n        text: [],\n\n        tags: [\n            lettersOnly,\n        ]\n    })\n\n    useEffect(() => {\n\n        getPets(session.user.id).then((pets) => {\n\n            setLoading(false)\n\n            setPets(pets)\n        \n        })\n\n    }, [])\n    \n    const createPost = () => {\n        if (file === null) {\n            window.alert('Posts need an image!')\n            return\n        }\n\n        const tagList = fields.get('tags').split(' ')\n            .map(t => t.trim().toLowerCase())\n            .filter(t => t.length > 0)\n\n        const petList = pets.map(({ id }) => ({ type: 'pets', id }))\n        \n        const makePostAndAddFields = (image) => (new Post())\n            .setAttribute('image', image)\n            .setAttribute('title', fields.get('title'))\n            .setAttribute('text', fields.get('text'))\n        \n        uploadImage(file)\n            .then((res) => res.json())\n            .then((res) => res.data)\n            .then(makePostAndAddFields)\n            .then((post) => post.create(session.user, tagList, petList))\n            .then((post) => history.replace(`/post/${post.id}`))\n    }\n\n    const handlePetChange = (index) => () => setPets((items) => {\n        items[index].isChecked = !items[index].isChecked\n\n        return items\n    })\n\n    const handleSubmit = () => fields.getValidity()\n        .then((valid) => valid && createPost())\n\n    return (\n        <>\n            <h1 className=\"mb-4\"><BackButton />Create Post</h1>\n\n            <Form>\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Title</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            type=\"text\"\n                            isInvalid={fields.isInvalid('title')}\n                            placeholder=\"Enter post title\"\n                            onChange={fields.set('title')} />\n\n                        {fields.isInvalid('title') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('title')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Image</Form.Label>\n                    <Col sm={10}>\n                        <Form.File\n                            custom\n                            label={file ? file.name : 'Upload in image'}\n                            onChange={({ target }) => setFile(target.files.item(0))} />\n\n                        <Form.Control.Feedback type=\"invalid\">\n                            A post image is required.\n                        </Form.Control.Feedback>\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Caption</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            as=\"textarea\"\n                            isInvalid={fields.isInvalid('text')}\n                            placeholder=\"Enter post caption\"\n                            onChange={fields.set('text')} />\n\n                        {fields.isInvalid('text') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('text')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Tags</Form.Label>\n\n                    <Col sm={10}>\n                        <Form.Control\n                            type=\"text\"\n                            isInvalid={fields.isInvalid('tags')}\n                            placeholder=\"Enter tags separated by a space\"\n                            onChange={fields.set('tags')} />\n\n                        {fields.isInvalid('tags') && (\n                            <Form.Control.Feedback type=\"invalid\">\n                                {fields.getError('tags')}\n                            </Form.Control.Feedback>\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Form.Label column sm={2}>Pets in this post</Form.Label>\n\n                    <Col sm={10}>\n                        {loading && (\n                            <FontAwesomeIcon className=\"my-3\" icon={faSpinner} pulse />\n                        )}\n\n                        {!loading && pets.map((pet, i) => (\n                            <Form.Check\n                                key={i}\n                                type=\"checkbox\"\n                                label={pet.name}\n                                defaultChecked={pet.isChecked}\n                                onChange={handlePetChange(i)} />\n                        ))}\n\n                        {!loading && pets.length === 0 && (\n                            <Form.Control plaintext readOnly defaultValue=\"You have no pets!\" />\n                        )}\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row}>\n                    <Col sm={{ span: 10, offset: 2 }}>\n                        <Button variant=\"primary\" onClick={handleSubmit}>\n                            <FontAwesomeIcon icon={faPlus} className=\"mr-2\" />\n                            Create Post\n                        </Button>\n                    </Col>\n                </Form.Group>\n            </Form>\n        </>\n    )\n}\n\nexport default CreatePostPage","import User from '../Models/User'\nimport apiRequest from './apiRequest'\n\nfunction getSession() {\n    return apiRequest('GET', '/session')\n        .then((res) => res.json())\n        .then(({ data }) => data.uid)\n        .then((uid) => apiRequest('GET', `/users/${uid}?include=subscriptions`))\n        .then((res) => res.json())\n        .then(({ data, included }) => ({\n            user: new User(data),\n            subscriptions: included.map((pet) => pet.id)\n        }))\n}\n\nexport default getSession\n","import { useState, useEffect, useContext } from 'react'\nimport {\n    HashRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useHistory,\n    useRouteMatch,\n    Redirect\n} from 'react-router-dom'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Card from 'react-bootstrap/Card'\nimport Table from 'react-bootstrap/Table'\nimport Button from 'react-bootstrap/Button'\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport Nav from 'react-bootstrap/Nav'\nimport NavDropdown from 'react-bootstrap/NavDropdown'\nimport Navbar from 'react-bootstrap/Navbar'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBone, faCog, faSignInAlt, faSignOutAlt, faUser, faUserCircle } from '@fortawesome/free-solid-svg-icons'\n\nimport apiRequest from './utils/apiRequest'\nimport formatDate from './utils/formatDate'\nimport SessionContext from './context/SessionContext'\nimport User from './Models/User'\n\nimport ExplorePage from './pages/dashboard/ExplorePage'\nimport PostPage from './pages/PostPage'\nimport SubscriptionsPage from './pages/dashboard/SubscriptionsPage'\nimport FavoritesPage from './pages/dashboard/FavoritesPage'\nimport SettingsPage from './pages/SettingsPage'\nimport SignInPage from './pages/SignInPage'\nimport SignUpPage from './pages/SignUpPage'\nimport CreatePostPage from './pages/CreatePostPage'\nimport getSession from './utils/getSession'\n\n// This part of the navigation bar shows if the user is not logged in.\nfunction Anonymous() {\n    const history = useHistory()\n\n    // Use history.push to programarically navigate to pages.\n    return (\n        <Nav className=\"ml-auto\">\n            <NavDropdown title={<FontAwesomeIcon icon={faUserCircle} size=\"2x\" />}>\n                <NavDropdown.Item onClick={() => history.push('/signin')}>\n                    <FontAwesomeIcon className=\"mr-2\" icon={faSignInAlt} /> Sign In\n                </NavDropdown.Item>\n\n                <NavDropdown.Item onClick={() => history.push('/signup')}>\n                    <FontAwesomeIcon className=\"mr-2\" icon={faUser} /> Sign Up\n                </NavDropdown.Item>\n            </NavDropdown>\n        </Nav>\n    )\n}\n\nfunction Authenticated() {\n    const [session, setSession] = useContext(SessionContext)\n    const history = useHistory()\n    const avatarStyle = {\n        borderRadius: '50%',\n        border: '1px solid #888',\n        width: '48px',\n        height: '48px'\n    }\n\n    const avatar = session.user.getAttribute('avatar') === null\n        ? <FontAwesomeIcon icon={faUserCircle} size=\"2x\" />\n        : <img style={avatarStyle} src={session.user.getAttribute('avatar')} />\n    \n    // Navigate to the explore page on logout\n    const logout = () => apiRequest('DELETE', '/session')\n        .then(() => setSession(null))\n        .then(() => history.push('/'))\n\n    return (\n        <Nav className=\"ml-auto\">\n            <NavDropdown className=\"text-center\" title={avatar}>\n                <NavDropdown.ItemText className=\"text-center\">\n                    {session.user.getAttribute('username')}\n                </NavDropdown.ItemText>\n\n                <NavDropdown.Divider />\n\n                <NavDropdown.Item as={Link} to=\"/settings\">\n                    <FontAwesomeIcon className=\"mr-2\" icon={faCog} />Settings\n                </NavDropdown.Item>\n\n                <NavDropdown.Item onClick={logout}>\n                    <FontAwesomeIcon className=\"mr-2\" icon={faSignOutAlt} />Sign Out\n                </NavDropdown.Item>\n            </NavDropdown>\n        </Nav>\n    )\n}\n\nfunction DashboardNav() {\n    const { url } = useRouteMatch()\n    const history = useHistory()\n    const prev = history.location.pathname.split('/').pop()\n    const pages = ['explore', 'subscriptions'/*, 'favorites'*/]\n    const [page, setPage] = useState(pages.includes(prev) ? prev : 'explore')\n\n    const goToPage = (p) => () => {\n        setPage(p)\n        history.replace(`${url}/${p}`)\n    }\n\n    return (\n        <ButtonGroup className=\"d-flex my-4\">\n            {pages.map((p, i) => (\n                <Button\n                    key={i}\n                    variant={p === page ? 'primary' : 'secondary'}\n                    onClick={goToPage(p)}>{`${p.charAt(0).toUpperCase()}${p.substr(1)}`}</Button>\n            ))}\n        </ButtonGroup>\n    )\n}\n\nfunction Dashboard() {\n    const [session] = useContext(SessionContext)\n    const { url } = useRouteMatch()\n\n    return (\n        <>\n            {session ? <DashboardNav /> : null}\n\n            <Switch>\n                <Route path={`${url}/explore`}>\n                    <ExplorePage />\n                </Route>\n\n                <Route path={`${url}/subscriptions`}>\n                    <SubscriptionsPage />\n                </Route>\n\n                <Route path={`${url}/favorites`}>\n                    <FavoritesPage />\n                </Route>\n\n                <Route path={`${url}/`}>\n                    <Redirect to={`${url}/explore`} />\n                </Route>\n            </Switch>\n        </>\n    )\n}\n\nfunction Main({ title }) {\n\n    // Component state is managed using the useState hook.\n    // Use the setSession function to update the session; don't try to mutate\n    // the session variable directly!\n    const sessionState = useState(null)\n    const [session, setSession] = sessionState\n\n    // useEffect hooks into this component's lifecycle. When it is loaded, it\n    // runs the provided callback function. If another callback is provided\n    // within the callback function, it will run it when the component is\n    // unloaded. In other words, inner callback = setup, outer callback =\n    // teardown.\n    //\n    // In this case, we're listening to the session observable. If it's not\n    // unsubscribed from when the component is not in use, a memory leak can\n    // occur.\n    useEffect(() => {\n        getSession()\n            .then(setSession)\n            .catch(() => console.log('Not logged in'))\n    }, [])\n\n    // Since this app is served in a directory within the server, the basename\n    // for all routes must be specified.\n    return (\n        <SessionContext.Provider value={sessionState}>\n            <Router>\n                <Navbar className=\"mb-4\" bg=\"dark\" variant=\"dark\" expand=\"lg\">\n                    <Container>\n                        <Navbar.Brand as={Link} to=\"/\">\n                            {title}<FontAwesomeIcon className=\"ml-2\" icon={faBone} />\n                        </Navbar.Brand>\n\n                        <Navbar.Toggle aria-controls=\"main-nav\" />\n                        \n                        <Navbar.Collapse id=\"main-nav\">\n                            {session ? <Authenticated /> : <Anonymous />}\n                        </Navbar.Collapse>\n                    </Container>\n                </Navbar>\n                \n                <Container>\n                    <Switch>\n                        <Route path=\"/dashboard\">\n                            <Dashboard />\n                        </Route>\n\n                        <Route path=\"/post/:id\">\n                            <PostPage />\n                        </Route>\n\n                        <Route path=\"/post\">\n                            <CreatePostPage />\n                        </Route>\n\n                        <Route path=\"/signin\">\n                            <SignInPage />\n                        </Route>\n\n                        <Route path=\"/signup\">\n                            <SignUpPage />\n                        </Route>\n\n                        <Route path=\"/settings\">\n                            <SettingsPage />\n                        </Route>\n\n                        <Route exact path=\"/\">\n                            <Redirect to=\"/dashboard\" />\n                        </Route>\n                    </Switch>\n                </Container>\n            </Router>\n        </SessionContext.Provider>\n    )\n}\n\nexport default Main\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport Main from './Main'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nReactDOM.render(\n    <React.StrictMode>\n        <Main title=\"The Pet Park\" />\n    </React.StrictMode>,\n    \n    document.getElementById('root')\n)\n"],"sourceRoot":""}